apply plugin: 'java'

sourceCompatibility = 1.5
version = '1.0'
repositories {
    mavenCentral()
}


dependencies {
    compile   'org.apache.shiro:shiro-all:1.0.0-incubating' ,
    'com.google.inject:guice:3.0'
}

configurations {
    compile
}

task copyToLib( dependsOn: 'gui:assemble'){
    copy {
        into "$buildDir/output"
        from configurations.runtime
    }
}

task zip(type: Zip) {
    from "$buildDir/output"
}

build.dependsOn(zip)

task explodedDist(dependsOn: assemble)  {

    project.tasks.withType(Jar).each {archiveTask ->
        copy {
            from archiveTask.archivePath
            into "$buildDir/output"
        }
    }

}


subprojects {
    apply plugin: 'java'
    repositories {
        mavenCentral()
    }
    dependencies {
        compile group: 'junit', name: 'junit', version: '4.11'
    }
    test {
        testLogging {
            events "passed", "skipped", "failed"
        }
    }

    task explodedDist(dependsOn: assemble)  {
        allprojects.each {project ->
            project.tasks.withType(Jar).each {archiveTask ->
                copy {
                    from archiveTask.archivePath
                    into getRootDir().toString() + "/build/output"
                }
            }
        }
    }

}


